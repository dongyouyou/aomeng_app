<!-- æµ®åŠ¨è£…é¥°å…ƒç´  -->
<view class="floating-element element-1"></view>
<view class="floating-element element-2"></view>
<view class="floating-element element-3"></view>

<view class="container safe-area-bottom">
  <!-- æ–°å¢ï¼šä¼šå‘˜æç¤ºæ  -->
  <view class="member-tip-bar" wx:if="{{showMemberTip}}" bindtap="goToMembership">
    <view class="tip-pattern tip-pattern-1"></view>
    <view class="tip-pattern tip-pattern-2"></view>
    <view class="tip-left">
      <view class="tip-icon">ğŸ‘‘</view>
      <view class="tip-text">å¼€é€šä¼šå‘˜å¯æŸ¥çœ‹å…¨éƒ¨å¥¥ç‰¹æ›¼è‹±é›„ï¼ˆå½“å‰ä»…æ˜¾ç¤º{{ultramanList.length}}ä½ï¼‰</view>
    </view>
    <view class="tip-action">ç«‹å³å¼€é€š</view>
    <view class="tip-shine-effect"></view>
  </view>

  <view class="hero-grid">
    <view class="hero-card" 
          wx:for="{{ultramanList}}" 
          wx:key="id" 
          bindtap="selectHero" 
          data-id="{{item.id}}">
      <image class="hero-image" src="{{item.image}}" mode="aspectFit"/>
      <view class="hero-info">
        <view class="hero-name">{{item.name}}</view>
        <view class="hero-brief">{{item.description}}</view>
      </view>
    </view>
  </view>

  <!-- éä¼šå‘˜æ—¶æ˜¾ç¤ºæç¤ºå¡ç‰‡ -->
  <view class="member-promo-card" wx:if="{{showMemberTip}}">
    <view class="promo-content">
      <view class="promo-icon">ğŸ”’</view>
      <view class="promo-text">
        <text class="promo-title">è§£é”å…¨éƒ¨å¥¥ç‰¹æ›¼è‹±é›„</text>
        <text class="promo-desc">æˆä¸ºä¼šå‘˜ï¼Œç«‹å³è§£é”å…¨éƒ¨å¥¥ç‰¹æ›¼è‹±é›„ï¼Œå¹¶äº«å—æ›´å¤šä¸“å±ç‰¹æƒï¼</text>
      </view>
      <button class="promo-btn" bindtap="goToMembership">ç«‹å³å¼€é€š</button>
    </view>
  </view>

  <!-- å…¨å±è¯¦æƒ…å¼¹çª— -->
  <view class="detail-modal {{selectedId !== null ? 'show' : ''}}" catchtap="closeDetail">
    <view class="modal-content" catchtap="stopPropagation" wx:if="{{selectedHero}}">
      <view class="modal-header">
        <text class="modal-title">{{selectedHero.name}}</text>
        <view class="header-actions">
          <view class="action-icon {{favorites.includes(selectedHero.id) ? 'active' : ''}}" catchtap="toggleFavorite">
            â˜…
          </view>
          <button class="share-btn" open-type="share">
            <text>â†—</text>
          </button>
          <view class="close-btn" catchtap="closeDetail">Ã—</view>
        </view>
      </view>
      
      <scroll-view scroll-y class="modal-body">
        <image class="detail-image" src="{{selectedHero.image}}" mode="aspectFit"/>
        
        <!-- æ ‡ç­¾é¡µå¯¼èˆª -->
        <view class="tab-nav">
          <view class="tab-item {{currentTab === 'info' ? 'active' : ''}}" 
                bindtap="switchTab" 
                data-tab="info">åŸºæœ¬ä¿¡æ¯</view>
          <view class="tab-item {{currentTab === 'story' ? 'active' : ''}}" 
                bindtap="switchTab" 
                data-tab="story">è‹±é›„æ•…äº‹</view>
          <view class="tab-item {{currentTab === 'interaction' ? 'active' : ''}}" 
                bindtap="switchTab" 
                data-tab="interaction">äº’åŠ¨ä¸“åŒº</view>
        </view>

        <!-- åŸºæœ¬ä¿¡æ¯æ ‡ç­¾é¡µ -->
        <view class="tab-content" hidden="{{currentTab !== 'info'}}">
          <text class="detail-desc">{{selectedHero.description}}</text>
          
          <view class="status-list">
            <view class="status-item">
              <text class="status-label">åŠ›é‡å€¼</text>
              <text class="status-value">{{selectedHero.power || 85}}</text>
            </view>
            <view class="status-item">
              <text class="status-label">æ•æ·åº¦</text>
              <text class="status-value">{{selectedHero.agility || 80}}</text>
            </view>
            <view class="status-item">
              <text class="status-label">æ™ºåŠ›å€¼</text>
              <text class="status-value">{{selectedHero.intelligence || 90}}</text>
            </view>
            <view class="status-item">
              <text class="status-label">é˜²å¾¡åŠ›</text>
              <text class="status-value">{{selectedHero.defense || 75}}</text>
            </view>
          </view>
          
          <view class="hero-actions">
            <view class="action-button like-button {{isLiked ? 'active' : ''}}" bindtap="toggleLike">
              <text class="action-icon">â™¥</text>
              <text class="action-label">å–œæ¬¢</text>
            </view>
            <view class="action-button" bindtap="showComments">
              <text class="action-icon">ğŸ’¬</text>
              <text class="action-label">è¯„è®º</text>
            </view>
            <view class="action-button" bindtap="shareHero">
              <text class="action-icon">â†—</text>
              <text class="action-label">åˆ†äº«</text>
            </view>
          </view>
        </view>

        <!-- è‹±é›„æ•…äº‹æ ‡ç­¾é¡µ -->
        <view class="tab-content" hidden="{{currentTab !== 'story'}}">
          <view class="story-title">{{selectedHero.name}}çš„æ•…äº‹</view>
          <view class="hero-story">
            {{selectedHero.story || 'è¿™ä½è‹±é›„çš„æ•…äº‹æ­£åœ¨åˆ›ä½œä¸­ï¼Œæ•¬è¯·æœŸå¾…...'}}
          </view>
        </view>

        <!-- äº’åŠ¨ä¸“åŒºæ ‡ç­¾é¡µ -->
        <view class="tab-content" hidden="{{currentTab !== 'interaction'}}">
          <view class="interactions">
            <view class="interaction-card" bindtap="startBattle">
              <view class="interaction-icon">âš”ï¸</view>
              <view class="interaction-label">å¯¹æˆ˜æ¨¡å¼</view>
            </view>
            <view class="interaction-card" bindtap="startQuiz">
              <view class="interaction-icon">â“</view>
              <view class="interaction-label">çŸ¥è¯†é—®ç­”</view>
            </view>
            <view class="interaction-card" bindtap="viewGallery">
              <view class="interaction-icon">ğŸ–¼ï¸</view>
              <view class="interaction-label">å›¾ç‰‡é›†</view>
            </view>
            <view class="interaction-card" bindtap="viewVideo">
              <view class="interaction-icon">â–¶ï¸</view>
              <view class="interaction-label">è§†é¢‘é›†</view>
            </view>
          </view>
        </view>
      </scroll-view>
    </view>
  </view>
</view>
