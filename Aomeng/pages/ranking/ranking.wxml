<!-- æµ®åŠ¨è£…é¥°å…ƒç´  -->
<view class="container">
  <view class="content-wrapper">
    <!-- ä¼šå‘˜æç¤ºæ  -->
    <view class="member-info-bar" wx:if="{{!isMember && fullListLength > limitedRanking}}">
      <text class="member-info-text">ğŸ‘‘ æŸ¥çœ‹å…¨éƒ¨å¥¥ç‰¹æ›¼æ’åï¼Œè¯·å¼€é€šä¼šå‘˜</text>
      <button class="member-info-btn" bindtap="goToMembership">å¼€é€šä¼šå‘˜</button>
    </view>
    
    <!-- æ’è¡Œæ ‡ç­¾åˆ‡æ¢ -->
    <view class="tabs">
      <view class="tab {{activeTab === 'power' ? 'active' : ''}}" bindtap="switchTab" data-tab="power">åŠ›é‡æ’è¡Œ</view>
      <view class="tab {{activeTab === 'speed' ? 'active' : ''}}" bindtap="switchTab" data-tab="speed">é€Ÿåº¦æ’è¡Œ</view>
      <view class="tab {{activeTab === 'height' ? 'active' : ''}}" bindtap="switchTab" data-tab="height">èº«é«˜æ’è¡Œ</view>
      <view class="tab {{activeTab === 'weight' ? 'active' : ''}}" bindtap="switchTab" data-tab="weight">ä½“é‡æ’è¡Œ</view>
    </view>

    <!-- æ ‡é¢˜åŠ¨ç”» -->
    <view class="ranking-title">
      <text class="title-text">{{activeTab === 'power' ? 'åŠ›é‡è‹±é›„' : activeTab === 'speed' ? 'é€Ÿåº¦è‹±é›„' : activeTab === 'height' ? 'é«˜å¤§è‹±é›„' : 'é‡é‡çº§è‹±é›„'}}</text>
      <text class="title-crown">ğŸ‘‘</text>
    </view>

    <!-- æ’è¡Œæ¦œåˆ—è¡¨ -->
    <view class="ranking-list">
      <!-- åˆ—è¡¨å¤´éƒ¨ -->
      <view class="list-header" wx:if="{{rankList.length > 0}}">
        <text class="header-rank">æ’å</text>
        <text class="header-hero">è‹±é›„</text>
        <text class="header-value">{{activeTab === 'power' ? 'åŠ›é‡å€¼' : activeTab === 'speed' ? 'é€Ÿåº¦å€¼' : activeTab === 'height' ? 'èº«é«˜(m)' : 'ä½“é‡(t)'}}</text>
      </view>
      
      <!-- æ•°æ®åŠ è½½ä¸­ -->
      <view class="loading-container" wx:if="{{isLoading}}">
        <view class="loading-icon"></view>
        <text class="loading-text">æ•°æ®åŠ è½½ä¸­...</text>
      </view>
      
      <!-- ç©ºæ•°æ®æç¤º -->
      <view class="empty-container" wx:if="{{!isLoading && rankList.length === 0}}">
        <text class="empty-text">æš‚æ— æ•°æ®</text>
        <text class="empty-tip">è¯·æ£€æŸ¥æ•°æ®æºæ˜¯å¦æ­£ç¡®</text>
      </view>
      
      <!-- æ’è¡Œåˆ—è¡¨ -->
      <view class="rank-item {{index < 3 ? 'top-three top-' + (index + 1) : ''}} {{!isMember && index >= limitedRanking ? 'locked' : ''}}" 
            wx:for="{{rankList}}" 
            wx:key="id" 
            bindtap="goToDetail" 
            data-hero="{{item}}"
            data-index="{{index}}">
        <view class="rank-number">
          <text class="rank-text">{{index + 1}}</text>
          <view class="medal" wx:if="{{index < 3}}">
            <text class="medal-icon">{{index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : 'ğŸ¥‰'}}</text>
          </view>
        </view>
        <view class="hero-info">
          <image class="hero-image" src="{{item.image}}" mode="aspectFit"></image>
          <text class="hero-name">{{item.name}}</text>
        </view>
        <view class="hero-value-container">
          <text class="hero-value">
            {{activeTab === 'power' ? item.power : 
              activeTab === 'speed' ? item.speed : 
              activeTab === 'height' ? item.height : 
              item.weight}}
          </text>
          <view class="stat-bar">
            <view class="stat-value" style="width: {{getStatPercentage(item)}}%"></view>
          </view>
        </view>
      </view>
      
      <!-- ä¼šå‘˜è§£é”æç¤º -->
      <view class="locked-rank-item" wx:if="{{!isMember && fullListLength > limitedRanking}}" bindtap="showMemberTip">
        <view class="lock-icon">ğŸ”’</view>
        <text class="lock-text">ä¼šå‘˜å¯æŸ¥çœ‹æ›´å¤šæ’å</text>
        <button class="lock-button" catchtap="goToMembership">å¼€é€šä¼šå‘˜</button>
      </view>
    </view>
    
    <!-- è°ƒè¯•ä¿¡æ¯ -->
    <view class="debug-info" wx:if="{{showDebug}}">
      <text class="debug-title">è°ƒè¯•ä¿¡æ¯:</text>
      <text class="debug-text">æ´»åŠ¨æ ‡ç­¾: {{activeTab}}</text>
      <text class="debug-text">åˆ—è¡¨é•¿åº¦: {{rankList.length}}</text>
      <text class="debug-text">æœ€å¤§å€¼: {{maxValue}}</text>
    </view>
  </view>
</view>
